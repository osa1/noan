{% extends "base.html" %}
{% load package_extras %}

{% block title %}Pardus - {{ pkg.name }} {{ pkg.full_version }} - Package Details{% endblock %}

{% block content %}
<div id="pkgdetails" class="box">

    <h2>Package Details: {{ pkg.name }} {{ pkg.full_version }}</h2>
<div id="detailslinks" class="listing">

        <div id="actionlist">
        <h4>Package Actions</h4>
            <ul class="small">
                <li><a href="http://websvn.pardus.org.tr/pardus/{{ pkg.distribution|dist_replace }}/{{ pkg.partOf.name|replace:"." }}/{{ pkg.pkgbase }}" title="View SVN entries in the {{pkg.repo|lower}}-{{pkg.architecture}} branch">SVN Entries </a></li>
                <!--<li><a href="svn trunk" title="View SVN entries on trunk">SVN Entries (trunk)</a></li>-->
                <li><a href="http://bugzilla.pardus.org.tr/enter_bug.cgi?product={{ pkg.distribution.name|split:"-"|getVersion:"tr" }}%20paketleri%20%2F%20{{ pkg.distribution.name|split:"-"|getVersion }}%20packages&component={{ pkg.pkgbase }}&rep_platform={{ pkg.architecture }}" title="Report bug for {{ pkg.name }}">Report a Bug</a></li>
                <li><a href="http://bugzilla.pardus.org.tr/buglist.cgi?query_format=specific&order=bugs.bug_id+desc&bug_status=__open__&product={{ pkg.distribution.name|split:"-"|getVersion:"tr" }}%20paketleri%20%2F%20{{ pkg.distribution.name|split:"-"|getVersion }}%20packages&component={{ pkg.pkgbase }}" title="Bug reports for {{ pkg.name }}">Bug Reports</a></li>
                <li><a href="http://packages.pardus.org.tr/pardus/{{ pkg.distribution.name|replace:"-"}}/{{ pkg.architecture }}/{{ pkg.uri }}" title="Download {{ pkg.name }}">Download</a></li>
                <!--<li><a href="download/" rel="nofollow" title="Download {{ pkg.name }} from mirror">Download From Mirror</a></li>-->
            </ul>
        </div>
    </div><!-- #actionlist -->

    <table id="pkginfo">
        <tr>
            <th>Architecture:</th>
            <td><a href="/packages/?architecture={{ pkg.architecture.name }}"
                    title="Browse packages for {{ pkg.architecture.name }} architectureitecture">{{ pkg.architecture.name }}</a></td>
        </tr>
        <tr>
            <th>Repository:</th>
            <td><a href="/packages/?repo={{ pkg.repo|capfirst }}"
                    title="Browse the {{ pkg.repo|capfirst }} repository">{{ pkg.repo|capfirst }}</a></td>
        </tr>
        <tr>
            <th>Description:</th>
            <td class="wrap">{{ pkg.pkgdesc.desc|default:"" }}</td>
        </tr>
        <tr>
            <th>Upstream URL:</th>
            <td>{% if pkg.homepage %}<a href="{{ pkg.homepage }}"
                    title="Visit the website for {{ pkg.name }}">{{ pkg.homepage }}</a>{% endif %}</td>
        </tr>
        <tr>
            <th>License(s):</th>
            <td>
                {% for license in pkg.licenses %}
                <a href="http://svn.pardus.org.tr/uludag/trunk/doc/en/licenses/{{ license }}">{{ license }}</a>
                {% if not forloop.last %}, {% endif %}
                {% endfor %}
            </td>
        </tr>
        <tr>
            <th>Component:</th>
            {% with pkg.partOf as partOf %}
            <td>{% if partOf %}
                <a href="/packages/?sort=&pkgbase={{ partOf }}"
                    title="Group details for {{ partOf }}">{{ partOf }}</a><br/>
                {% else %}None{% endif %}
            </td>
            {% endwith %}
         </tr><tr>
            <th>Maintainer:</th>
            <td>
                <a href="/packages/?sort=&maintainer={{ pkg.packager }}"
                    title="Packages maintained by {{ pkg.packager}}">{{ pkg.packager }}</a>
            </td>
        </tr><tr>
            <th>Package Size:</th>
            <td>{{ pkg.package_size|filesizeformat }}</td>
        </tr><tr>
            <th>Installed Size:</th>
            <td>{{ pkg.installed_size|filesizeformat }}</td>
        </tr><tr>
            <th>Last Updater:</th>
            <td>{{ pkg.last_packager }}</td>
        </tr><tr>
            <th>Last Updated:</th>
            <td>{{ pkg.last_update }}</td>
        </tr>

    </table>

    <div id="metadata">

        {% with pkg.deps as deps %}
        <div id="pkgdeps" class="listing">

            <h3 title="{{ pkg.name }} has the following dependencies">
                Dependencies ({{deps|length}})</h3>

            {% if deps %}
            <ul>
                {% for depend in deps %}
                <li><a href="/packages/{{ pkg.distribution }}/{{ pkg.architecture }}/{{ depend }}/"
                    title="View package details for {{ depend }}">{{ depend }}</a>{{ depend.dep.depvcmp|default:"" }}
                </li>
                {% endfor %}
            </ul>
            {% endif %}



        </div><!-- #pkgdeps -->
        {% endwith %}

        {% with pkg.revdeps as revdeps %}
        <div id="pkgreqs" class="listing">

            <h3 title="Packages that require {{ pkg.name }}">
                Required By ({{revdeps|length}})</h3>

            {% if revdeps %}
            <ul>
                {% for dep in revdeps %}
                <li><a href="/packages/{{ dep.distribution }}/{{ dep.architecture }}/{{ dep.name }}/"
                    title="View package details for {{ dep.name }}">{{ dep.name }}</a>
                </li>
                {% endfor %}
            </ul>
            {% endif %}

        </div><!-- #pkgreqs -->
        {% endwith %}

        <div id="pkgfiles" class="listing">

            <h3 title="Complete list of files contained within this package">
                Package Contents</h3>

            <div id="pkgfilelist">
                <p><a id="filelink" href="files/"
                    title="Click to view the complete file list for {{ pkg.name }}">
                    View the file list for {{ pkg.name }}</a></p>
            </div>

        </div><!-- #pkgfiles -->

        <div id="pkgpatches" class="listing">

            <h3 title="{{ pkg.name }} patches">Package History</h3>

            <style type="text/css">
                th { text-align: left; padding-left: 7px; }
                td { padding: 0 5px; vertical-align: top; text-align: left; }
            </style>
                <table class="results">
                    <tr>
                        <th>Date</th>
                        <th>Version</th>
                        <th>Packager</th>
                        <th>Details</th>
                    </tr>
                    {% for update in pkg.updates %}
                    <tr class="{% cycle 'odd' 'even' %}">
                        <td>{{ update.date|date:"Y-m-d" }}</td>
                        <td>{{ update.version }}-{{ update.release }}</td>
                        <td>
                            {% with packager_username=update.packager|packager_username %}
                            {% if packager_username %}
                                <a href="/packages/?sort=&q=&maintainer={{ packager_username }}&last_update=&limit=50">
                            {% else %}
                                <a href="mailto:{{ update.email }}">
                            {% endif %}
                            {{ update.packager }}</a>
                        </td>
                        <td>{{ update.comment_html|safe }}</td>
                        {% endwith %}
                    </tr>
                    {% endfor %}
                </table>

        </div><!-- #pkgpatches -->

    </div><!-- #metadata -->

</div><!-- #pkgdetails -->

{% load cdn %}{% jquery %}
<script type="text/javascript" src="/media/archweb.js"></script>
<script type="text/javascript">
$(document).ready(ajaxifyFiles);
</script>
{% endblock %}
